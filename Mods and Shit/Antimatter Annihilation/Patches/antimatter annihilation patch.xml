<?xml version="1.0" encoding="utf-8"?>
<Patch>

	<Operation Class="PatchOperationAddModExtension">
		<success>Always</success>
		<xpath>Defs/DesignationCategoryDef[defName="Antimatter"]</xpath>
		<value>
			<li Class="BetterArchitect.NestedCategoryExtension">
				<parentCategory>Security</parentCategory>
			</li>
		</value>
	</Operation>
	
<!-- FIXES -->
	
	<!-- Author indicated that this is a legacy building that should be hidden from the player but that they didn't know how to implement this.  -->
	<Operation Class="PatchOperationAdd">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="InputTray_AA"]</xpath>
		<value>
			<designationCategory/>
		</value>
	</Operation>
	
<!-- WEAPONS -->

	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[@ParentName="AATurret"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Weapons</designationCategory>
		</value>
	</Operation>
	
	<Operation Class="PatchOperationAdd">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="Megumin_AA"]</xpath>
		<value>
			<designationCategory>Ferny_Weapons</designationCategory>
		</value>
	</Operation>
	
<!-- TRAPS -->

	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="TrapIED_N2Mine_AA"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Traps</designationCategory>
		</value>
	</Operation>
	
<!-- POWER INFRASTRUCTURE -->

	<Operation Class="PatchOperationAdd">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="PowerNetConsole_AA"]</xpath>
		<value>
			<designationCategory>Ferny_PowerManagement</designationCategory>
		</value>
	</Operation>

	<Operation Class="PatchOperationAdd">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="AntimatterReactorInjector_AA"]</xpath>
		<value>
			<designationCategory>Ferny_PowerManagement</designationCategory>
		</value>
	</Operation>

	<Operation Class="PatchOperationAdd">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="AntimatterReactor_AA"]</xpath>
		<value>
			<designationCategory>Ferny_PowerManagement</designationCategory>
		</value>
	</Operation>
	
<!-- POWER GENERATION -->

	<Operation Class="PatchOperationAdd">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="AntimatterReactorPowerConverter_AA"]</xpath>
		<value>
			<designationCategory>Ferny_PowerGeneration</designationCategory>
		</value>
	</Operation>
	
<!-- PROCESSING PRODUCTION -->
	
	<Operation Class="PatchOperationAdd">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="ParticleAccelerator_AA"]</xpath>
		<value>
			<designationCategory>Ferny_ProcessingProduction</designationCategory>
		</value>
	</Operation>

	<Operation Class="PatchOperationAdd">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="CompositeRefiner_AA"]</xpath>
		<value>
			<designationCategory>Ferny_ProcessingProduction</designationCategory>
		</value>
	</Operation>

	<Operation Class="PatchOperationAdd">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="AlloyFusionMachine_AA"]</xpath>
		<value>
			<designationCategory>Ferny_ProcessingProduction</designationCategory>
		</value>
	</Operation>

</Patch>
