<?xml version="1.0" encoding="utf-8"?>
<Patch>

    <!-- RENAME IDEOLOGY -->
    <Operation Class="PatchOperationReplace">
        <success>Always</success>
        <xpath>Defs/DesignationCategoryDef[defName="Ideology"]/label</xpath>
        <value>
            <label>Culture</label>
        </value>
    </Operation>
    <Operation Class="PatchOperationAdd">
        <success>Always</success>
        <xpath>Defs/DesignationCategoryDef[defName="Ideology"]</xpath>
        <value>
            <modExtensions>
                <li Class="BetterArchitect.NestedCategoryExtension">
                    <parentCategory>Ferny_Life</parentCategory>
                </li>
            </modExtensions>
        </value>
    </Operation>

    <!-- MEDICAL -->
    <Operation Class="PatchOperationReplace">
        <success>Always</success>
        <xpath>Defs/ThingDef[defName="BiosculpterPod"]/designationCategory</xpath>
        <value>
            <designationCategory>Ferny_Medical</designationCategory>
        </value>
    </Operation>

    <!-- ENHANCEMENT -->
    <Operation Class="PatchOperationReplace">
        <success>Always</success>
        <xpath>Defs/ThingDef[defName="SleepAccelerator"]/designationCategory</xpath>
        <value>
            <designationCategory>Ferny_Enhancement</designationCategory>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <success>Always</success>
        <xpath>Defs/ThingDef[defName="NeuralSupercharger"]/designationCategory</xpath>
        <value>
            <designationCategory>Ferny_Enhancement</designationCategory>
        </value>
    </Operation>

    <!-- DECORATIONS -->
    <Operation Class="PatchOperationAdd">
        <success>Always</success>
        <xpath>Defs/ThingDef[defName="PlantPot_Bonsai"]</xpath>
        <value>
            <designationCategory>Ferny_Decorations</designationCategory>
        </value>
    </Operation>

    <!-- MANAGEMENT -->

    <Operation Class="PatchOperationReplace">
        <success>Always</success>
        <xpath>Defs/ThingDef[defName="StylingStation"]/designationCategory</xpath>
        <value>
            <designationCategory>Ferny_Management</designationCategory>
        </value>
    </Operation>

    <!-- CONTROL -->

    <Operation Class="PatchOperationReplace">
        <success>Always</success>
        <xpath>Defs/ThingDef[defName="Skullspike"]/designationCategory</xpath>
        <value>
            <designationCategory>Ferny_Control</designationCategory>
        </value>
    </Operation>

    <Operation Class="PatchOperationReplace">
        <success>Always</success>
        <xpath>Defs/ThingDef[defName="GibbetCage"]/designationCategory</xpath>
        <value>
            <designationCategory>Ferny_Control</designationCategory>
        </value>
    </Operation>

    <!-- CULTURE -->
    <Operation Class="PatchOperationReplace">
        <success>Always</success>
        <xpath>Defs/ThingDef[defName="MarriageSpot"]/designationCategory</xpath>
        <value>
            <designationCategory>Ideology</designationCategory>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <success>Always</success>
        <xpath>Defs/ThingDef[defName="PartySpot"]/designationCategory</xpath>
        <value>
            <designationCategory>Ideology</designationCategory>
        </value>
    </Operation>

    <!-- Floors -->
    <Operation Class="PatchOperationAdd">
        <xpath>Defs/TerrainDef[defName="Boards_Totemic"]</xpath>
        <value>
            <designationCategory>Ferny_FloorsWood</designationCategory>
        </value>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>Defs/TerrainDef[@ParentName="IdeoStoneTileBase"]</xpath>
        <value>
            <designationCategory>Ferny_FloorsStone</designationCategory>
        </value>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>Defs/TerrainDef[defName="Plates_Spikecore" or defName="Tile_Transhumanist"]</xpath>
        <value>
            <designationCategory>Ferny_FloorsMetal</designationCategory>
        </value>
    </Operation>
    
    <Operation Class="PatchOperationAdd">
        <xpath>Defs/TerrainDef[@ParentName="IdeoCarpetBase"]</xpath>
        <value>
            <designationCategory>Ferny_FloorsCarpet</designationCategory>
        </value>
    </Operation>
    <Operation Class="PatchOperationAddModExtension">
        <xpath>Defs/TerrainTemplateDef[@ParentName="IdeoCarpetTemplateBase"]</xpath>
        <value>
            <li Class="BetterArchitect.TemplateCategoryExtension">
                <designationCategory>Ferny_FloorsCarpet</designationCategory>
            </li>
        </value>
    </Operation>

    <!-- Floor Coverings -->
    <Operation Class="PatchOperationAdd">
        <xpath>Defs/ThingDef[defName="AnimalistSlab_Medium" or defName="AnimalistSlab_Broad"]</xpath>
        <value>
            <designationCategory>Ferny_FloorsWood</designationCategory>
        </value>
    </Operation>
    <Operation Class="PatchOperationAdd">
        <xpath>Defs/ThingDef[defName="TotemicSlab_Medium" or defName="TotemicSlab_Broad"]</xpath>
        <value>
            <designationCategory>Ferny_FloorsWood</designationCategory>
        </value>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>Defs/ThingDef[defName="MorbidSlab_Medium" or defName="MorbidSlab_Broad"]</xpath>
        <value>
            <designationCategory>Ferny_FloorsStone</designationCategory>
        </value>
    </Operation>
    
    <Operation Class="PatchOperationAdd">
        <xpath>Defs/ThingDef[defName="SpikecoreFloorStar_Medium" or defName="SpikecoreFloorStar_Broad"]</xpath>
        <value>
            <designationCategory>Ferny_FloorsMetal</designationCategory>
        </value>
    </Operation>
    
    <Operation Class="PatchOperationAdd">
        <xpath>Defs/ThingDef[defName="RusticRug_Medium" or defName="RusticRug_Broad"]</xpath>
        <value>
            <designationCategory>Ferny_FloorsCarpet</designationCategory>
        </value>
    </Operation>

</Patch>